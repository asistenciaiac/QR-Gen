<script>
    function generateQR() {
        let inputUrl = document.getElementById("url-input").value.trim();
        const qrContainer = document.getElementById("qr-code");
        const downloadBtn = document.getElementById("download-btn");

        if (!inputUrl) {
            alert("¡Ingresa una URL!");
            return;
        }

        // ----- Corregimos la URL aquí ----- //
        // Si no empieza con http:// o https://, añadimos https://
        if (!inputUrl.startsWith("http://") && !inputUrl.startsWith("https://")) {
            inputUrl = "https://" + inputUrl;
        }

        // Generar el QR
        qrContainer.innerHTML = "";
        new QRCode(qrContainer, {
            text: inputUrl,
            width: 200,
            height: 200,
            colorDark: "#000000",
            colorLight: "#ffffff",
        });

        downloadBtn.style.display = "block";
    }

    function downloadQR() {
        const canvas = document.querySelector("#qr-code canvas");
        if (!canvas) return;

        const link = document.createElement("a");
        link.download = "qr.png";
        link.href = canvas.toDataURL();
        link.click();
    }
</script>
